"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw o}}return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ScoreKeeper=function(){function e(t){_classCallCheck(this,e),this.gameBoard=t,this.numRows=t.rows.length,this.numCols=t.rows[0].length}return _createClass(e,[{key:"playerHasNextMove",value:function(e){var t=this;return t.getEmptyCells().forEach(function(r){return t.setScoreForMove(r.col,r.row,e)>0?!0:void 0}),!1}},{key:"setScoreForMove",value:function(e,t,r){var n=[];return n=n.concat(this.searchUp(e,t,r)),n=n.concat(this.searchUpAndRight(e,t,r)),n=n.concat(this.searchRight(e,t,r)),n=n.concat(this.searchDownAndRight(e,t,r)),n=n.concat(this.searchDown(e,t,r)),n=n.concat(this.searchDownAndLeft(e,t,r)),n=n.concat(this.searchLeft(e,t,r)),n=n.concat(this.searchUpAndLeft(e,t,r)),console.log("POINTS EARNED: %d",n.length),console.log("HITS: ",n),n}},{key:"getFlatGameBoard",value:function(){return Array.prototype.concat.apply([],this.gameBoard.rows)}},{key:"getEmptyCells",value:function(){return this.getFlatGameBoard().filter(function(e){return 0===e.player})}},{key:"calculatePoints",value:function(e,t,r,n,a){function o(e,t){for(var o=!0;o;){u=h=f=y=v=g=void 0,o=!1;var l=e,s=t,u=i.checkCell(l,s,a),h=_slicedToArray(u,4),f=h[0],y=h[1],v=h[2],g=h[3];if(f||y)return[];if(!v)return console.log("Returning cells: ",c),c;console.log("HIT! ",g),c.push(g),e=l+r,t=s+n,o=!0}}var c=[],i=this;return-1===e||-1===t||8===e||8===t?[]:o(e,t)}},{key:"checkCell",value:function(e,t,r){var n=e===this.numRows-1||t===this.numCols-1,a=this.gameBoard.rows[e][t],o=0===a.player,c=a.player!==r&&!o;return[n,o,c,a]}},{key:"getScoreForPlayer",value:function(e){return this.getFlatGameBoard().reduce(function(t,r){return r.player===e&&t++,t},0)}},{key:"resetMoveScoreRatings",value:function(){this.getFlatGameBoard().forEach(function(e){e.isHighestScoring=!1})}},{key:"searchRight",value:function(e,t,r){return this.calculatePoints(t,e+1,0,1,r)}},{key:"searchLeft",value:function(e,t,r){return this.calculatePoints(t,e-1,0,-1,r)}},{key:"searchUp",value:function(e,t,r){return this.calculatePoints(t+1,e,1,0,r)}},{key:"searchDown",value:function(e,t,r){return this.calculatePoints(t-1,e,-1,0,r)}},{key:"searchUpAndRight",value:function(e,t,r){return this.calculatePoints(t+1,e+1,1,1,r)}},{key:"searchUpAndLeft",value:function(e,t,r){return this.calculatePoints(t+1,e-1,1,-1,r)}},{key:"searchDownAndRight",value:function(e,t,r){return this.calculatePoints(t-1,e+1,-1,1,r)}},{key:"searchDownAndLeft",value:function(e,t,r){return this.calculatePoints(t-1,e-1,-1,-1,r)}}]),e}();
"use strict";var _classCallCheck=function(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")},Player=function s(t){_classCallCheck(this,s),this.number=t,this.score=2,this.moves=[]},Move=function t(s,i,l){_classCallCheck(this,t),this.x=i,this.y=s,this.pointValue=l},Cell=function i(s,t){_classCallCheck(this,i),this.row=s,this.col=t,this.player=0,this.potentialTarget=!1};
"use strict";var _slicedToArray=function(r,o){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r)){var e=[],t=!0,a=!1,n=void 0;try{for(var l,i=r[Symbol.iterator]();!(t=(l=i.next()).done)&&(e.push(l.value),!o||e.length!==o);t=!0);}catch(c){a=!0,n=c}finally{try{!t&&i["return"]&&i["return"]()}finally{if(a)throw n}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance")};!function(){function r(){console.log("Gameboard: ",c);var r="";c.rows.forEach(function(o,e){o.forEach(function(o,t){r+="<div class='cell' data-target=\""+o.potentialTarget+'" data-is-highest-sciring-move="'+o.isHighestScoring+'" data-player-num="'+o.player+"\" data-row-num='"+e+"' data-col-num='"+t+"'>"+o.player+"</div>"})}),$(".game-board").html(r)}function o(){var r=f.getFlatGameBoard();r.forEach(function(r){r.potentialTarget=!1});var o=r.filter(function(r){return r.player===v.number});console.log("Active player cells: ",o);var e=[],a=c.rows;return o.forEach(function(r){var o=a[r.row+1][r.col];t(o,e);var n=a[r.row+1][r.col+1];t(n,e);var l=a[r.row+1][r.col-1];t(l,e);var i=a[r.row][r.col-1];t(i,e);var c=a[r.row][r.col+1];t(c,e);var s=a[r.row-1][r.col];t(s,e);var u=a[r.row-1][r.col+1];t(u,e);var v=a[r.row-1][r.col-1];t(v,e)}),e}function e(r){var o=i(),e=_slicedToArray(o,2),t=(e[0],e[1]),a=f.setScoreForMove(r.col,r.row,t),n=a.length,l=0===r.player&&n>0;return{isHit:l,points:n}}function t(r,o){var t=e(r);console.log("belowLeft isHit: %a points: %d",t.isHit,t.points),t.isHit&&(r.potentialTarget=!0,r.pointValue=t.points,-1===o.indexOf(r)&&o.push(r))}function a(r){var o=1===r?0:1;v=p[o]}function n(r){r.forEach(function(r){var o=$(".player-"+r.number);r.score=f.getScoreForPlayer(r.number),$(".player-"+r.number+" .score").html(r.score),$(".player-"+r.number+" .moves").html(r.moves.length),r.number===v.number?o.addClass("active"):o.removeClass("active")})}function l(){c.rows[3][3].player=1,c.rows[4][3].player=2,c.rows[3][4].player=2,c.rows[4][4].player=1,c.rows[2][4].potentialTarget=!0,c.rows[3][5].potentialTarget=!0,c.rows[4][2].potentialTarget=!0,c.rows[5][3].potentialTarget=!0}function i(){var r=1===v.number?1:0;return[v.number,p[r].number]}for(var c={rows:[]},s=new Player(1),u=new Player(2),v=s,p=[s,u],f=void 0,y=8,m=8,w=0;y>w;w++){for(var g=[],d=0;m>d;d++)g.push(new Cell(w,d));c.rows.push(g)}f=new ScoreKeeper(c),$(".game-board").on("click",".cell",function(){var e=$(this),t=+e.data("row-num"),l=+e.data("col-num"),s=(+e.data("player-num"),c.rows[t][l]),u=e.data("target"),y=i(),m=_slicedToArray(y,2),w=m[0],g=m[1],d=f.setScoreForMove(l,t,w),h=d.length;if(u&&0!==h){s.player=w,d.forEach(function(r){r.player=w});var b=new Move(t,l,h);v.moves.push(b);var T=o();console.log("Potential Next Moves: ",T);var E=T.sort(function(r,o){return o.pointValue-r.pointValue})[0];E.isHighestScoring=!0,a(g),r(),n(p),f.resetMoveScoreRatings(),T?console.log("It's now player %d's turn",g):console.log("No next moves for player %d",g)}}),l(),r(),n(p),console.log("Empty cells: ",f.getEmptyCells())}();
//# sourceMappingURL=app.js.map